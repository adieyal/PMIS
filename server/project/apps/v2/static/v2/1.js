webpackJsonp([1],{169:function(e,t,n){var r=n(2),o=n(178),i=n(181),a=n(184),s=n(187),u=n(190),l=n(147),c=n(112),p=n(193),f=n(194),h={ehlanzeni:"Ehlanzeni District",gertsibande:"Gert Sibande District",nkangala:"Nkangala District"},d=[0,0],m=r.createClass({displayName:"ClusterDashboard",componentDidMount:function(){this.store=p(this.props.slug),this.store.addChangeListener(this._handleStoreChange),l.fetchCluster(this.props.slug,c.getState().auth_token,function(e){f.receiveCluster(this.props.slug,e)}.bind(this))},componentWillUnmount:function(){this.store.removeChangeListener(this._handleStoreChange)},_handleStoreChange:function(){var e=this.store.getState(),t=_.pluck(e.districts,"projects-implementation");d[1]=Math.max(d[1],_.max(t)),this.setState({store:e})},getInitialState:function(){return{view:"default",store:{}}},showDefault:function(){this.setState({view:"default"})},showProgrammes:function(){this.setState({view:"programmes"})},showDistricts:function(){this.setState({view:"districts"})},translateNumber:function(e){return"string"==typeof e&&(e=parseInt(e.replace(/[R,]/g,""))),(e/1e6).toFixed(2)},generatePerformance:function(e){var t=this.state.store;return data=[["Budget",this.translateNumber(t[e+"-budget"])],["Actual",this.translateNumber(t[e+"-expenditure"])]]},extractValue:function(e,t){var n=e.filter(function(e){return e["marker-text"]==t});return n.length?this.translateNumber(n[0]["value-text"]):null},generateProgrammes:function(){var e={planning:"Planning",implementation:"Implementation",accounts:"Final accounts"},t=this.state.store;return data=t.programmes.map(function(t){var n={projects:t.projects.total,implementation:t.projects.implementation},r=_(e).map(function(e,n){return[e,t.projects[n]]}).reject(function(e){return 0==e[1]}).value();return{title:t.name,numbers:n,projects:r,budget:[["Budget",this.translateNumber(t.performance[0])],["Actual",this.translateNumber(t.performance[1])]]}}.bind(this))},generateDistricts:function(){var e=this.state.store,t=[];for(var n in e.districts){var r=e.districts[n],o=h[n];t.push({slug:n,title:o,numbers:{implementation:r["projects-implementation"]},implementation:[["0 - 50%",r["projects-0-50"]],["51 - 75%",r["projects-51-75"]],["76 - 99%",r["projects-76-99"]],["100%",r["projects-100"]]],budget:[["Budget",this.translateNumber(r.performance[0])],["Actual",this.translateNumber(r.performance[1])]]})}return t},generateProjectsPie:function(){var e=this.state.store;return data=[["Planning",e["planning-projects-total"]],["Implementation",e["implementation-projects-total"]]]},render:function(){var e=this.state.store;if(e.client){var t,l=e.client.replace(/^Department of /,"");switch(this.state.view){case"default":var c=_.flatten(_.values(d));t=r.createElement("div",{className:"default-view inner"},r.createElement("div",{className:"row"},r.createElement("div",{className:"cluster-title"},l),r.createElement("div",{className:"cluster-projects"},r.createElement("div",{className:"number"},e["total-projects"]),"Projects"),r.createElement("div",{className:"cluster-programmes"},r.createElement("div",{className:"number",onClick:this.showProgrammes},e["total-programmes"]),"Programmes")),r.createElement("div",{className:"row"},r.createElement(i,{key:"total",title:"Total",data:this.generatePerformance("total")}),r.createElement(i,{key:"planning",title:"Planning",data:this.generatePerformance("planning")}),r.createElement(i,{key:"implementation",title:"Implementation",data:this.generatePerformance("implementation")})),r.createElement("div",{className:"row"},r.createElement(o,{title:"Projects",data:this.generateProjectsPie()}),r.createElement(a,{districts:e.districts,domain:c,onClick:this.showDistricts})));break;case"programmes":t=r.createElement("div",{className:"listing-view inner"},r.createElement("div",{className:"row"},r.createElement("div",{className:"cluster-title",onClick:this.showDefault},l),r.createElement("div",{className:"cluster-year"},e.year),r.createElement("div",{className:"cluster-search"},r.createElement("input",{ref:"search",type:"search"}))),r.createElement("div",{className:"row rows"},this.generateProgrammes().map(function(e){return r.createElement(s,{programme:e})})));break;case"districts":t=r.createElement("div",{className:"listing-view inner"},r.createElement("div",{className:"row"},r.createElement("div",{className:"cluster-title",onClick:this.showDefault},l),r.createElement("div",{className:"cluster-year"},e.year),r.createElement("div",{className:"cluster-search"},r.createElement("input",{ref:"search",type:"search"}))),r.createElement("div",{className:"row rows"},this.generateDistricts().map(function(e){return r.createElement(u,{key:e.slug,district:e})})))}return r.createElement("div",{className:"cluster-dashboard"},t)}var p=n(198);return r.createElement("div",{className:"cluster-dashboard loading"},r.createElement("img",{src:p}))}});e.exports=m},178:function(e,t,n){var r=n(2),o=n(47),i={loadComponent:function(e){var t;return n(179)(function(n){t=n,e&&e(n)}),t},_renderUnavailable:function(){return new o("")}},a=n(170);a(i),e.exports=r.createClass(i),e.exports.Mixin=i},179:function(e,t,n){e.exports=function(e){n.e(2,function(){e(n(180))})}},181:function(e,t,n){var r=n(2),o=n(47),i={loadComponent:function(e){var t;return n(182)(function(n){t=n,e&&e(n)}),t},_renderUnavailable:function(){return new o("")}},a=n(170);a(i),e.exports=r.createClass(i),e.exports.Mixin=i},182:function(e,t,n){e.exports=function(e){n.e(3,function(){e(n(183))})}},184:function(e,t,n){var r=n(2),o=n(47),i={loadComponent:function(e){var t;return n(185)(function(n){t=n,e&&e(n)}),t},_renderUnavailable:function(){return new o("")}},a=n(170);a(i),e.exports=r.createClass(i),e.exports.Mixin=i},185:function(e,t,n){e.exports=function(e){n.e(4,function(){e(n(186))})}},187:function(e,t,n){var r=n(2),o=n(47),i={loadComponent:function(e){var t;return n(188)(function(n){t=n,e&&e(n)}),t},_renderUnavailable:function(){return new o("")}},a=n(170);a(i),e.exports=r.createClass(i),e.exports.Mixin=i},188:function(e,t,n){e.exports=function(e){n.e(5,function(){e(n(189))})}},190:function(e,t,n){var r=n(2),o=n(47),i={loadComponent:function(e){var t;return n(191)(function(n){t=n,e&&e(n)}),t},_renderUnavailable:function(){return new o("")}},a=n(170);a(i),e.exports=r.createClass(i),e.exports.Mixin=i},191:function(e,t,n){e.exports=function(e){n.e(6,function(){e(n(192))})}},193:function(e,t,n){var r=n(174),o=n(164).EventEmitter,i=n(150),a=n(151),s=(n(112),n(197)),u=(n(147),"change"),l={},c={},p=function(e){var t=l[e];return"undefined"==typeof t&&(t=r.merge({},o.prototype,{slug:e,addChangeListener:function(e){this.on(u,e)},removeChangeListener:function(e){this.removeListener(u,e)},emitChange:function(){this.emit(u)},getState:function(){return c[this.slug]}}),t.dispatchToken=i.register(function(e){var n=e.action;if(n.slug==t.slug){var r=a.ActionTypes;switch(n.type){case r.RECEIVE_CLUSTER:i.waitFor([s.dispatchToken]),c[n.slug]=n.cluster,t.emitChange()}}}),l[e]=t),t};e.exports=p},194:function(e,t,n){{var r=n(150),o=n(151).ActionTypes;n(147)}e.exports={receiveCluster:function(e,t){r.handleAction({type:o.RECEIVE_CLUSTER,slug:e,cluster:t})}}},197:function(e,t,n){var r=n(174),o=n(164).EventEmitter,i=n(150),a=n(151),s={maxProjects:0,districtsByCluster:{}},u=r.merge({},o.prototype,{addChangeListener:function(e){this.on(a.CHANGE_EVENT,e)},removeChangeListener:function(e){this.removeListener(a.CHANGE_EVENT,e)},emitChange:function(){this.emit(a.CHANGE_EVENT)},getState:function(){return s}});u.dispatchToken=i.register(function(e){var t=e.action,n=a.ActionTypes;switch(t.type){case n.RECEIVE_DATA:if("undefined"==typeof s.districtsByCluster[t.slug]){s.districtsByCluster[t.slug]=t.districts,previousMaxProjects=s.maxProjects;var o=r.flatten(r.map(s.districtsByCluster),function(e){return r.values(e)}),i=r.max(r.pluck(o,"projects-implementation"));s.maxProjects=Math.max(s.maxProjects,i),s.maxProjects>previousMaxProjects&&u.emitChange()}}}),e.exports=u},198:function(e){e.exports="data:image/gif;base64,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"}});